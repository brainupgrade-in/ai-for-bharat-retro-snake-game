<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game - Windows 95 Style</title>
    <link rel="stylesheet" href="css/win95.css">
    <link rel="stylesheet" href="css/game.css">
</head>

<body>
    <div class="window">
        <div class="title-bar">
            <div class="title-bar-text">üêç Snake Game</div>
            <div class="title-bar-controls">
                <button aria-label="Minimize"></button>
                <button aria-label="Maximize"></button>
                <button aria-label="Close"></button>
            </div>
        </div>

        <div class="menu-bar">
            <div class="menu-item" data-menu="game">Game</div>
            <div class="menu-item" data-menu="options">Options</div>
            <div class="menu-item" data-menu="help">Help</div>
        </div>

        <div class="window-body">
            <canvas id="gameCanvas" width="400" height="400"></canvas>

            <!-- Game overlays -->
            <div id="startScreen" class="overlay">
                <div class="overlay-content">
                    <h2>Snake Game</h2>
                    <p>Use arrow keys to move</p>
                    <p>Collect red food to grow</p>
                    <p>Avoid walls and your own body</p>
                    <p class="start-prompt">Press SPACE to start</p>
                </div>
            </div>

            <div id="pauseScreen" class="overlay hidden">
                <div class="overlay-content">
                    <h2>Game Paused</h2>
                    <p>Press P or ESC to resume</p>
                </div>
            </div>

            <div id="gameOverScreen" class="overlay hidden">
                <div class="overlay-content">
                    <h2>Game Over</h2>
                    <p id="finalScore">Score: 0</p>
                    <p id="highScoreDisplay">High Score: 0</p>
                    <p id="newHighScore" class="hidden">New High Score!</p>
                    <p class="restart-prompt">Press R to restart</p>
                </div>
            </div>
        </div>

        <!-- Commentary Box -->
        <div id="commentary-box" class="commentary-box hidden"></div>

        <!-- Mobile Touch Controls -->
        <div id="mobileControls" class="mobile-controls">
            <div class="control-row">
                <button class="control-btn" id="upBtn">‚Üë</button>
            </div>
            <div class="control-row">
                <button class="control-btn" id="leftBtn">‚Üê</button>
                <button class="control-btn" id="pauseBtn">‚è∏</button>
                <button class="control-btn" id="rightBtn">‚Üí</button>
            </div>
            <div class="control-row">
                <button class="control-btn" id="downBtn">‚Üì</button>
            </div>
        </div>

        <div class="status-bar">
            <div class="status-field">Score: <span id="currentScore">0</span></div>
            <div class="status-field">High Score: <span id="highScore">0</span></div>
            <div class="status-field" id="aiStatus">AI: OFF</div>
            <div class="status-field difficulty" id="difficultyStatus">Difficulty: Medium</div>
            <div class="status-field sound-toggle" id="soundToggle" onclick="toggleSoundFromIcon()"
                title="Click to toggle sound">
                <span id="soundIcon">üîä</span> <span id="soundStatus">ON</span>
                <div class="volume-bar" id="volumeBar">
                    <div class="volume-level" id="volumeLevel"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Statistics Dialog -->
    <div id="statisticsDialog" class="overlay hidden" tabindex="-1">
        <div class="dialog-window">
            <div class="title-bar">
                <div class="title-text">Your Statistics</div>
                <button class="close-button" onclick="closeStatisticsDialog()">√ó</button>
            </div>
            <div class="dialog-content">
                <div class="stats-grid">
                    <div class="stat-row">
                        <span class="stat-label">Games Played:</span>
                        <span class="stat-value" id="statsGamesPlayed">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Games Won:</span>
                        <span class="stat-value" id="statsGamesWon">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Win Rate:</span>
                        <span class="stat-value" id="statsWinRate">0%</span>
                    </div>
                    <div class="stat-separator"></div>
                    <div class="stat-row">
                        <span class="stat-label">High Score:</span>
                        <span class="stat-value" id="statsHighScore">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Average Score:</span>
                        <span class="stat-value" id="statsAvgScore">0.0</span>
                    </div>

                    <div class="stat-separator"></div>
                    <div class="stat-row">
                        <span class="stat-label">Skill Level:</span>
                        <div class="skill-container">
                            <div class="skill-bar">
                                <div class="skill-fill" id="skillFill"></div>
                            </div>
                            <span class="skill-text" id="skillText">0% - Novice</span>
                        </div>
                    </div>
                </div>
                <div class="dialog-buttons">
                    <button class="btn" onclick="resetStatistics()">Reset</button>
                    <button class="btn" onclick="closeStatisticsDialog()">OK</button>
                </div>
            </div>
        </div>
    </div>

    <!-- AWS Settings Dialog -->
    <div id="awsDialog" class="overlay hidden" tabindex="-1">
        <div class="dialog-window">
            <div class="title-bar">
                <div class="title-text">AWS Bedrock Settings</div>
                <button class="close-button" onclick="closeAWSDialog()">√ó</button>
            </div>
            <div class="dialog-content">
                <p>Enter your AWS credentials to enable AI features:</p>
                <div class="form-group">
                    <label for="awsRegion">Region:</label>
                    <input type="text" id="awsRegion" value="ap-south-1" placeholder="ap-south-1">
                </div>
                <div class="form-group">
                    <label for="awsAccessKey">Access Key ID:</label>
                    <input type="text" id="awsAccessKey" placeholder="Your AWS Access Key">
                </div>
                <div class="form-group">
                    <label for="awsSecretKey">Secret Access Key:</label>
                    <input type="password" id="awsSecretKey" placeholder="Your AWS Secret Key">
                </div>
                <div class="form-group">
                    <label for="awsSessionToken">Session Token (optional):</label>
                    <input type="password" id="awsSessionToken" placeholder="Session token for temporary credentials">
                </div>
                <div class="dialog-buttons">
                    <button class="btn" onclick="saveAWSSettings()">Save</button>
                    <button class="btn" onclick="testAWSConnection()">Test</button>
                    <button class="btn" onclick="closeAWSDialog()">Cancel</button>
                </div>
                <div id="awsStatus" class="status-message"></div>
            </div>
        </div>
    </div>

    <!-- Sound Settings Dialog -->
    <div id="soundDialog" class="overlay hidden" tabindex="-1">
        <div class="dialog-window">
            <div class="title-bar">
                <div class="title-text">Sound Settings</div>
                <button class="close-button" onclick="closeSoundDialog()">√ó</button>
            </div>
            <div class="dialog-content">
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="soundEnabled" checked> Enable Sound Effects
                    </label>
                </div>
                <div class="form-group">
                    <label for="soundVolume">Volume:</label>
                    <input type="range" id="soundVolume" min="0" max="100" value="50" oninput="updateVolumeDisplay()">
                    <span id="volumeDisplay">50%</span>
                </div>
                <div class="form-group">
                    <button class="btn" onclick="testSoundEffect()">Test Sound</button>
                </div>
                <div class="dialog-buttons">
                    <button class="btn" onclick="applySoundSettings()">Apply</button>
                    <button class="btn" onclick="closeSoundDialog()">Cancel</button>
                </div>
                <div id="soundStatus" class="status-message"></div>
            </div>
        </div>
    </div>

    <!-- Instructions Dialog -->
    <div id="instructionsDialog" class="overlay hidden" tabindex="-1">
        <div class="dialog-window">
            <div class="title-bar">
                <div class="title-text">Snake Game Instructions</div>
                <button class="close-button" onclick="closeInstructionsDialog()">√ó</button>
            </div>
            <div class="dialog-content">
                <div class="instructions-content">
                    <h3>üéÆ Controls:</h3>
                    <ul>
                        <li><strong>Arrow Keys</strong> - Move the snake</li>
                        <li><strong>SPACE</strong> - Start the game</li>
                        <li><strong>P or ESC</strong> - Pause/Resume</li>
                        <li><strong>R</strong> - Restart after game over</li>
                    </ul>

                    <h3>üéØ Objective:</h3>
                    <ul>
                        <li>Eat the red food to grow your snake</li>
                        <li>Avoid hitting walls or your own body</li>
                        <li>Try to achieve the highest score!</li>
                    </ul>

                    <h3>üèÜ Scoring:</h3>
                    <ul>
                        <li>Each food item = 1 point</li>
                        <li>Game speed increases as you grow</li>
                        <li>High scores are saved automatically</li>
                    </ul>

                    <h3>üîä Sound Controls:</h3>
                    <ul>
                        <li><strong>Click sound icon</strong> - Toggle sound on/off</li>
                        <li><strong>Right-click sound icon</strong> - Adjust volume</li>
                        <li><strong>Scroll on sound icon</strong> - Quick volume adjust</li>
                    </ul>
                </div>
                <div class="dialog-buttons">
                    <button class="btn" onclick="closeInstructionsDialog()">OK</button>
                </div>
            </div>
        </div>
    </div>

    <!-- About Dialog -->
    <div id="aboutDialog" class="overlay hidden" tabindex="-1">
        <div class="dialog-window">
            <div class="title-bar">
                <div class="title-text">About Snake Game</div>
                <button class="close-button" onclick="closeAboutDialog()">√ó</button>
            </div>
            <div class="dialog-content">
                <div class="about-content">
                    <div class="about-header">
                        <h2>üêç Snake Game - Windows 95 Style</h2>
                        <p><strong>Version:</strong> 1.0</p>
                    </div>

                    <div class="about-description">
                        <p>A nostalgic recreation of the classic Snake game with authentic Windows 95 styling and modern
                            AI-powered enhancements.</p>
                    </div>

                    <div class="about-tech">
                        <h3>Built with:</h3>
                        <ul>
                            <li>Vanilla JavaScript (ES6+)</li>
                            <li>HTML5 Canvas API</li>
                            <li>CSS3 with Win95 aesthetic</li>
                            <li>Web Audio API for retro sounds</li>
                            <li>Amazon Bedrock for AI features</li>
                        </ul>
                    </div>

                    <div class="about-features">
                        <h3>Features:</h3>
                        <ul>
                            <li>Authentic Windows 95 UI</li>
                            <li>Smooth 60 FPS gameplay</li>
                            <li>AI opponent with multiple difficulty levels</li>
                            <li>Real-time AI commentary</li>
                            <li>Dynamic difficulty adjustment</li>
                            <li>Retro 8-bit sound effects</li>
                            <li>High score persistence</li>
                        </ul>
                    </div>

                    <div class="about-author">
                        <h3>Author:</h3>
                        <p><strong>Rajesh Gheware</strong></p>
                        <p><a href="https://linkedin.com/in/rajesh-gheware"
                                target="_blank">linkedin.com/in/rajesh-gheware</a></p>
                    </div>

                    <div class="about-project">
                        <p><em>Created for the AI for Bharat hackathon.</em></p>
                    </div>
                </div>
                <div class="dialog-buttons">
                    <button class="btn" onclick="closeAboutDialog()">OK</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Dropdown menus -->
    <div id="gameMenu" class="dropdown-menu hidden">
        <div class="menu-option">New Game</div>
        <div class="menu-option">Pause</div>
        <div class="menu-separator"></div>
        <div class="menu-option">Exit</div>
    </div>

    <div id="optionsMenu" class="dropdown-menu hidden">
        <div class="menu-option" id="aiToggle">AI Opponent: OFF</div>
        <div class="menu-option" id="aiDifficulty">AI Difficulty: Medium</div>
        <div class="menu-option" id="commentaryToggle">Commentary: OFF</div>
        <div class="menu-option" id="difficultySelector">Difficulty: Medium</div>
        <div class="menu-separator"></div>
        <div class="menu-option" id="awsSettings">AWS Settings</div>
        <div class="menu-option">Sound</div>
    </div>

    <div id="helpMenu" class="dropdown-menu hidden">
        <div class="menu-option">Instructions</div>
        <div class="menu-option" id="statisticsOption">Statistics</div>
        <div class="menu-option">About</div>
    </div>

    <!-- AWS SDK for Bedrock (optional - for AI features) -->
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1563.0.min.js"></script>

    <script type="module" src="js/main.js"></script>
</body>

</html>